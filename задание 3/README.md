# Задание 3
  ```sql
SELECT Товар
FROM Товар AS t1
    /*
    тут я решил в условия взять 2 значения:
    самая последняя актуальная дата и предпоследнее через TOP и сортировку даты
    и через них посчитать нужную разницу в процентах.
     */
WHERE (
          SELECT (t2.ЦенаПоследнейЗакупки - t3.ЦенаПредпоследнейЗакупки) / t3.ЦенаПредпоследнейЗакупки * 100
          FROM (
                   SELECT TOP 1 Цена AS ЦенаПоследнейЗакупки
                   FROM закупка
                   WHERE закупка.КодТовара = t1.КодТовара

                   ORDER BY дата DESC -- 2016-01-10T00:00:00.000Z

               ) as t2,
               (
                   SELECT TOP 1 Цена AS ЦенаПредпоследнейЗакупки
                   from (
                            SELECT TOP 2 *
                            FROM закупка
                            WHERE закупка.КодТовара = t1.КодТовара
                            ORDER BY дата DESC
                        ) AS t1
                   ORDER BY t1.дата ASC -- 2016-01-16T00:00:00.000Z
               ) as t3)
          BETWEEN -50
          AND 50
 ```
используется between т.к. закупка могла стать как на 50% дороже, так и дешевле.